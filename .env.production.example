# ======================================================================
# MCP CRYPTO TRADING SERVER - PRODUCTION ENVIRONMENT CONFIGURATION
# ======================================================================
# Copy this file to .env.production and configure with actual values
# Updated: 2025-08-31

# ======================================================================
# CORE APPLICATION SETTINGS
# ======================================================================
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO
PYTHONPATH=/app

# Application Identification (2025+ Updates)
APP_NAME=MCP Crypto Trading Server
APP_VERSION=2.0.0
APP_DESCRIPTION=Production-ready MCP cryptocurrency trading analysis module with 2025+ enhancements

# ======================================================================
# MCP SERVER CONFIGURATION (2025+ Updates)
# ======================================================================
MCP_SERVER_HOST=0.0.0.0
MCP_SERVER_PORT=8080
MCP_SERVER_NAME=mcp-crypto-trading
MCP_SERVER_VERSION=2.0.0

# Protocol Configuration (Updated for MCP 2.1.0+)
MCP_PROTOCOL_VERSION=2.1.0
MCP_MAX_MESSAGE_SIZE=10485760  # 10MB
MCP_TIMEOUT_SECONDS=30
MCP_KEEPALIVE_INTERVAL=30

# ======================================================================
# KAAYAAN INFRASTRUCTURE CONNECTIONS
# ======================================================================

# MongoDB Configuration
MONGODB_URI=mongodb://kaayaan:kaayaan%402025@mongodb:27017/
MONGODB_DATABASE=crypto_trading
MONGODB_COLLECTION_PREFIX=mcp_
MONGODB_MAX_POOL_SIZE=100
MONGODB_MIN_POOL_SIZE=10
MONGODB_MAX_IDLE_TIME_MS=30000
MONGODB_CONNECT_TIMEOUT_MS=10000
MONGODB_SOCKET_TIMEOUT_MS=30000

# Redis Configuration  
REDIS_URL=redis://:kaayaan@2025@redis:6379
REDIS_DB=0
REDIS_MAX_CONNECTIONS=20
REDIS_RETRY_ON_TIMEOUT=true
REDIS_HEALTH_CHECK_INTERVAL=30
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_SOCKET_KEEPALIVE=true

# PostgreSQL Configuration
POSTGRES_DSN=postgresql://n8n_user:kaayaan_n8n_2025@postgresql:5432/n8n_postgres_db
POSTGRES_POOL_SIZE=20
POSTGRES_MAX_OVERFLOW=30
POSTGRES_POOL_TIMEOUT=30
POSTGRES_POOL_RECYCLE=3600

# WhatsApp Integration (WAHA)
WHATSAPP_API=https://waha.kaayaan.ai
WHATSAPP_SESSION=97008525
WHATSAPP_TIMEOUT=30
WHATSAPP_RETRY_ATTEMPTS=3

# ======================================================================
# CRYPTOCURRENCY API CREDENTIALS
# ======================================================================

# Binance API (Optional - for enhanced trading features)
BINANCE_API_KEY=your_binance_api_key_here
BINANCE_SECRET_KEY=your_binance_secret_key_here
BINANCE_TESTNET=false

# CoinGecko API (for price data)
COINGECKO_API_KEY=your_coingecko_api_key_here
COINGECKO_BASE_URL=https://api.coingecko.com/api/v3

# CoinMarketCap API (alternative price source)
COINMARKETCAP_API_KEY=your_coinmarketcap_api_key_here
COINMARKETCAP_BASE_URL=https://pro-api.coinmarketcap.com/v1

# ======================================================================
# SECURITY CONFIGURATION
# ======================================================================

# JWT Configuration
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# API Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=1000
RATE_LIMIT_BURST_SIZE=100

# CORS Configuration
CORS_ALLOWED_ORIGINS=["https://kaayaan.ai", "https://*.kaayaan.ai"]
CORS_ALLOWED_METHODS=["GET", "POST", "PUT", "DELETE", "OPTIONS"]
CORS_ALLOWED_HEADERS=["*"]
CORS_ALLOW_CREDENTIALS=true

# ======================================================================
# PERFORMANCE & SCALING CONFIGURATION
# ======================================================================

# Concurrency Limits
MAX_CONCURRENT_REQUESTS=200
MAX_WORKERS=4
WORKER_TIMEOUT=30

# Caching Configuration
CACHE_TTL_SECONDS=300
CACHE_MAX_SIZE=1000
CACHE_CLEANUP_INTERVAL=600

# Request Timeouts
HTTP_TIMEOUT=30
API_REQUEST_TIMEOUT=15
DATABASE_QUERY_TIMEOUT=30

# ======================================================================
# TRADING ALGORITHM PARAMETERS
# ======================================================================

# Risk Management
DEFAULT_RISK_PERCENTAGE=2.0
MAX_POSITION_SIZE_PERCENTAGE=10.0
STOP_LOSS_PERCENTAGE=5.0
TAKE_PROFIT_PERCENTAGE=15.0

# Technical Analysis Parameters
RSI_PERIOD=14
RSI_OVERSOLD=30
RSI_OVERBOUGHT=70
BOLLINGER_PERIOD=20
BOLLINGER_STD_DEV=2
EMA_SHORT_PERIOD=12
EMA_LONG_PERIOD=26
MACD_SIGNAL_PERIOD=9

# Market Data Configuration
PRICE_UPDATE_INTERVAL=60  # seconds
MARKET_DATA_LOOKBACK_DAYS=30
MIN_TRADING_VOLUME_USD=100000

# ======================================================================
# MONITORING & OBSERVABILITY
# ======================================================================

# Metrics Configuration
ENABLE_METRICS=true
METRICS_PORT=8080
METRICS_PATH=/metrics
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus_multiproc_dir

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INTERVAL=30

# Sentry Error Tracking
SENTRY_DSN=your_sentry_dsn_here
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# OpenTelemetry Configuration
OTEL_SERVICE_NAME=mcp-crypto-trading
OTEL_SERVICE_VERSION=1.0.0
OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:14268/api/traces

# ======================================================================
# LOGGING CONFIGURATION
# ======================================================================

# Log Levels: CRITICAL, ERROR, WARNING, INFO, DEBUG
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE_PATH=/app/logs/mcp-crypto.log
LOG_MAX_FILE_SIZE=100MB
LOG_BACKUP_COUNT=5
LOG_ROTATION_INTERVAL=daily

# Structured Logging
ENABLE_STRUCTURED_LOGGING=true
LOG_REQUEST_DETAILS=true
LOG_RESPONSE_DETAILS=false
LOG_SENSITIVE_DATA=false

# ======================================================================
# RESOURCE LIMITS & OPTIMIZATION
# ======================================================================

# Memory Management
MAX_MEMORY_USAGE_MB=1024
GARBAGE_COLLECTION_THRESHOLD=0.8

# CPU Optimization
UV_THREADPOOL_SIZE=4
ASYNC_POOL_SIZE=100

# File System
TEMP_DIR=/app/tmp
DATA_DIR=/app/data
LOG_DIR=/app/logs
MAX_DISK_USAGE_PERCENTAGE=85

# ======================================================================
# NOTIFICATION & ALERTING
# ======================================================================

# Alert Thresholds
ALERT_HIGH_CPU_PERCENTAGE=80
ALERT_HIGH_MEMORY_PERCENTAGE=85
ALERT_HIGH_DISK_PERCENTAGE=90
ALERT_ERROR_RATE_THRESHOLD=5  # errors per minute

# Notification Channels
NOTIFICATION_WEBHOOK_URL=https://hooks.slack.com/your-webhook-url
NOTIFICATION_EMAIL_SMTP_SERVER=smtp.gmail.com
NOTIFICATION_EMAIL_SMTP_PORT=587
NOTIFICATION_EMAIL_USERNAME=alerts@kaayaan.ai
NOTIFICATION_EMAIL_PASSWORD=your_email_password

# ======================================================================
# BACKUP & DISASTER RECOVERY
# ======================================================================

# Database Backup Configuration
BACKUP_ENABLED=true
BACKUP_INTERVAL_HOURS=24
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/app/backups

# Data Retention
DATA_RETENTION_DAYS=90
LOG_RETENTION_DAYS=30
METRICS_RETENTION_DAYS=15

# ======================================================================
# DEVELOPMENT & DEBUGGING (Production Override)
# ======================================================================

# Development Features (Disabled in Production)
ENABLE_DEBUG_ENDPOINTS=false
ENABLE_PROFILING=false
ENABLE_SWAGGER_UI=false
ENABLE_REDOC=false

# Test Mode Configuration
TEST_MODE=false
MOCK_EXTERNAL_APIS=false
USE_TEST_DATABASE=false

# ======================================================================
# FEATURE FLAGS & EXPERIMENTAL FEATURES
# ======================================================================

# Trading Features
ENABLE_LIVE_TRADING=false  # Set to true only after thorough testing
ENABLE_BACKTESTING=true
ENABLE_PAPER_TRADING=true
ENABLE_PORTFOLIO_TRACKING=true

# Analytics Features
ENABLE_ADVANCED_ANALYTICS=true
ENABLE_ML_PREDICTIONS=false  # Experimental
ENABLE_SENTIMENT_ANALYSIS=false  # Experimental

# API Features
ENABLE_WEBSOCKET_STREAMING=true
ENABLE_GRAPHQL_ENDPOINT=false
ENABLE_API_VERSIONING=true

# ======================================================================
# COMPLIANCE & AUDIT
# ======================================================================

# Audit Logging
ENABLE_AUDIT_LOGGING=true
AUDIT_LOG_LEVEL=INFO
AUDIT_LOG_FILE=/app/logs/audit.log

# Compliance
ENABLE_DATA_ENCRYPTION=true
ENABLE_PII_PROTECTION=true
GDPR_COMPLIANCE=true
DATA_ANONYMIZATION=true

# ======================================================================
# CUSTOM ENVIRONMENT OVERRIDES
# ======================================================================

# Custom settings can be added here for specific deployment needs
# CUSTOM_SETTING_1=value1
# CUSTOM_SETTING_2=value2